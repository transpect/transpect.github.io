<?xml version="1.0" encoding="UTF-8"?><html xmlns="http://www.w3.org/1999/xhtml" xml:base="../styleguide.html">
  <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Styleguide</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    
    <meta name="theme-color" content="#FF9800" />
    
    <link rel="apple-touch-icon-precomposed" href="icons/apple-touch-icon-152x152.png" />
    <meta name="msapplication-TileImage" content="icons/mstile-144x144.png" />
    <link rel="icon" href="icons/favicon-32x32.png" sizes="32x32" />
    
    <link type="text/css" rel="stylesheet" media="screen,projection" href="css/prism.css" />
    <link type="text/css" rel="stylesheet" media="screen,projection" href="css/materialize.min.css" />
    <link type="text/css" rel="stylesheet" media="screen,projection" href="css/le-tex.css" />
  </head>
  <body>
    
    <header>
      <div class="container"><a href="#" data-activates="tr-nav" class="button-collapse top-nav circle hide-on-large-only"><i class="mdi-navigation-menu"></i></a></div>
      
      
      <ul id="tr-nav" class="side-nav fixed" style="width:260px">
        <li class="logo"><a id="logo-container" href="#" class="brand-logo"><object id="front-page-logo" type="image/svg+xml" data="icons/logo-transpect.svg">Your browser does not support SVG</object></a></li>
        
      <li class="naventry-1st"><a href="index.html">About</a></li><li class="naventry-1st"><a href="getting-started.html">Getting Started</a></li><li class="no-padding"><ul class="collapsible collapsible-accordion"><li class="naventry-1st" id="d9492e504"><a class="collapsible-header">Modules</a><div class="collapsible-body"><ul><li class="naventry-2nd"><a href="modules-bits2hub.html">bits2hub</a></li><li class="naventry-2nd"><a href="modules-calabash-distro.html">calabash-distro</a></li><li class="naventry-2nd"><a href="modules-calabash-frontend.html">calabash-frontend</a></li><li class="naventry-2nd"><a href="modules-cascade.html">cascade</a></li><li class="naventry-2nd"><a href="modules-crossref.html">crossref</a></li><li class="naventry-2nd"><a href="modules-css-tools.html">css-tools</a></li><li class="naventry-2nd"><a href="modules-docx2hub.html">docx2hub</a></li><li class="naventry-2nd"><a href="modules-docx2jats-demo.html">docx2jats-demo</a></li><li class="naventry-2nd"><a href="modules-docx2tex.html">docx2tex</a></li><li class="naventry-2nd"><a href="modules-docx_modify-lib.html">docx_modify-lib</a></li><li class="naventry-2nd"><a href="modules-epubcheck-idpf.html">epubcheck-idpf</a></li><li class="naventry-2nd"><a href="modules-epubcheck-transpect.html">epubcheck-transpect</a></li><li class="naventry-2nd"><a href="modules-epubtools.html">epubtools</a></li><li class="naventry-2nd"><a href="modules-epubtools-frontend.html">epubtools-frontend</a></li><li class="naventry-2nd"><a href="modules-evolve-hub.html">evolve-hub</a></li><li class="naventry-2nd"><a href="modules-github-api.html">github-api</a></li><li class="naventry-2nd"><a href="modules-html2hub.html">html2hub</a></li><li class="naventry-2nd"><a href="modules-htmlreports.html">htmlreports</a></li><li class="naventry-2nd"><a href="modules-htmltables.html">htmltables</a></li><li class="naventry-2nd"><a href="modules-htmltemplates.html">htmltemplates</a></li><li class="naventry-2nd"><a href="modules-hub2bits.html">hub2bits</a></li><li class="naventry-2nd"><a href="modules-hub2docx-frontend.html">hub2docx-frontend</a></li><li class="naventry-2nd"><a href="modules-hub2docx-lib.html">hub2docx-lib</a></li><li class="naventry-2nd"><a href="modules-hub2html.html">hub2html</a></li><li class="naventry-2nd"><a href="modules-hub2tei.html">hub2tei</a></li><li class="naventry-2nd"><a href="modules-idml2xml.html">idml2xml</a></li><li class="naventry-2nd"><a href="modules-idmlvalidation.html">idmlvalidation</a></li><li class="naventry-2nd"><a href="modules-image-props-extension.html">image-props-extension</a></li><li class="naventry-2nd"><a href="modules-image-transform-extension.html">image-transform-extension</a></li><li class="naventry-2nd"><a href="modules-jats2html.html">jats2html</a></li><li class="naventry-2nd"><a href="modules-jing-trang-patch.html">jing-trang-patch</a></li><li class="naventry-2nd"><a href="modules-kindlegen-amzn.html">kindlegen-amzn</a></li><li class="naventry-2nd"><a href="modules-map-style-names.html">map-style-names</a></li><li class="naventry-2nd"><a href="modules-mml2tex.html">mml2tex</a></li><li class="naventry-2nd"><a href="modules-nlm-stylechecker.html">nlm-stylechecker</a></li><li class="naventry-2nd"><a href="modules-pdf2fxl.html">pdf2fxl</a></li><li class="naventry-2nd"><a href="modules-rng-extension.html">rng-extension</a></li><li class="naventry-2nd"><a href="modules-schema-html.html">schema-html</a></li><li class="naventry-2nd"><a href="modules-schema-jats.html">schema-jats</a></li><li class="naventry-2nd"><a href="modules-schematron.html">schematron</a></li><li class="naventry-2nd"><a href="modules-tei2html.html">tei2html</a></li><li class="naventry-2nd"><a href="modules-transpect.github.io.html">transpect.github.io</a></li><li class="naventry-2nd"><a href="modules-transpectdoc.html">transpectdoc</a></li><li class="naventry-2nd"><a href="modules-unzip-extension.html">unzip-extension</a></li><li class="naventry-2nd"><a href="modules-upload-webcomponent.html">upload-webcomponent</a></li><li class="naventry-2nd"><a href="modules-use-css-decorator-classes.html">use-css-decorator-classes</a></li><li class="naventry-2nd"><a href="modules-xml2idml.html">xml2idml</a></li><li class="naventry-2nd"><a href="modules-xml2tex.html">xml2tex</a></li><li class="naventry-2nd"><a href="modules-xproc-util.html">xproc-util</a></li><li class="naventry-2nd"><a href="modules-xslt-util.html">xslt-util</a></li></ul></div></li></ul></li><li class="active naventry-1st"><a href="styleguide.html">Styleguide</a></li><li class="naventry-1st"><a href="tutorial.html">Tutorials</a></li></ul>
    </header>
    
    <main>
      <div class="section orange" id="index-banner">
        <div class="container">
          <h1 id="tr-title" class="light header center-on-small-only white-text">Styleguide</h1>
          <h4 id="tr-subtitle" class="light orange-text text-lighten-4 center-on-small-only">Guidelines for writing XProc, XSLT, XPath…</h4>
        </div>
      </div>
      <div class="container">
        <div class="row">
          
          <div class="col s12 m9 l10" id="tr-content"><div id="d9662e9" class="section scrollspy">
        <h2 class="header">General</h2>
        <ul>
          <li>
            <p>Use <code class="language-code">UTF-8</code> encoding</p>
          </li>
          <li>
            <p>Use soft-tabs with a two space indent</p>
          </li>
          <li>
            <p>Keep lines shorter than 128 characters</p>
          </li>
          <li>
            <p>Use spaces around operators, after commas, colons and semicolons</p>
          </li>
          <li>
            <p>Leave a blank newline at the end of each file</p>
          </li>
          <li>
            <p>Comment your code extensively and use always speaking variable names. </p>
          </li>
        </ul>
      </div><div id="d9662e58" class="section scrollspy">
        <h2 class="header">Repository</h2>
        <div>
          <h3 class="">SVN Externals / Git Submodules</h3>
          <ul>
            <li>
              <p>Always include SVN externals or Git submodules at the root of your repository.</p>
            </li>
            <li>
              <p>Use SVN externals or Git submodules only in your frontend project and not in libraries.</p>
            </li>
          </ul>
        </div>
        <div>
          <h3 class="">XML Catalogs</h3>
          <ul>
            <li>
              <p>Include an XML catalog to your repository. The path of your catalog should be
                  <code class="language-filename">xmlcatalog/catalog.xml</code></p>
            </li>
            <li>
              <p>The catalog file must include a <code class="language-code">rewriteURI</code> statement which identifies the repository
                with a URI.</p>
              <pre><code class="language-markup">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;catalog xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog"&gt;
  
  &lt;rewriteURI uriStartString="http://transpect.io/docx2hub/" 
              rewritePrefix="../"&gt;
  
&lt;/catalog&gt;</code></pre>
            </li>
          </ul>
        </div>
        <div>
          <h3 class="">Paths</h3>
          <p>The code should be stored separated by code language. The directory name identifies the typical file
            extension of the code file. Always use common file extensions, such as <code class="language-filename">xpl</code> for XProc
            pipelines and <code class="language-filename">xsl</code> for XSLT Stylesheets.</p>
          <pre>
myproject/
  |--css
  |  |--stylesheet.css
  |--xmlcatalog/
  |  |--catalog.xml
  |--xpl
  |  |--myproject.xpl
  |--xsl
  |  |--myproject.xsl
</pre>
        </div>
      </div><div id="d9662e133" class="section scrollspy">
        <h2 class="header">XProc</h2>
        <ul>
          <li>
            <p>Encapsulate commonly used functionality into components with <code class="language-code">p:import</code> and
                <code class="language-code">p:declare-step</code>. Add <code class="language-code">name</code> and <code class="language-code">type</code> attributes to each
                <code class="language-code">p:declare-step</code> to make it accessible from inside and outside of the pipeline</p>
          </li>
          <li>
            <p>Avoid too many nested <code class="language-code">p:choose</code> if possible. A proper XSLT is many times a better option
              to encapsulate application logic.</p>
          </li>
          <li>
            <p>Use <code class="language-code">p:documentation</code> tags to explain what your pipeline does.</p>
          </li>
          <li>
            <p>Provide debugging features and console output in your pipeline, e.g. via <code class="language-code">tr:store-debug</code>
              or <code class="language-code">cx:message</code></p>
          </li>
          <li>
            <p>We encourage you to use the <code class="language-code">cx:depends-on</code> attribute for declaring step order explicitely.
              This is needed when you want to use steps which operate with files.</p>
          </li>
        </ul>
      </div><div id="d9662e202" class="section scrollspy">
        <h2 class="header">XSLT</h2>
        <ul>
          <li>
            <p>Avoid too many nested <code class="language-code">xsl:choose</code> as this will make your code difficult do decipher. Try
              to replace with <code class="language-code">xsl:template</code> with concrete matching patterns.</p>
          </li>
          <li>
            <p>Provide a data type for variables via <code class="language-code">as</code> attribute.</p>
            <pre><code class="language-markup">&lt;xsl:variable name="chapter" select="chapter" as="element(chapter)"/&gt;</code></pre>
          </li>
          <li>
            <p>Avoid to call named templates which call named templates and so on. If applicable use functions
              instead.</p>
          </li>
          <li>
            <p>Use XSLT modes only if technically required and not to separate your code logically. Be careful when
              using XSLT modes accompanied with identity templates as this will cost memory and reduce overall execution
              speed</p>
          </li>
          <li>
            <p>Use namespace <code class="language-code">http://transpect.io</code> and prefix <code class="language-code">tr</code> for custom functions.</p>
          </li>
        </ul>
      </div><div id="d9662e260" class="section scrollspy">
        <h2 class="header">XPath</h2>
        <ul>
          <li>
            <p>Some XPath expressions force the XML parser to perform deep explorations of the XML tree. If you know
              the expected context, you can reduce CPU and memory usage by avoiding wildcard patterns (<code class="language-code">*</code>,
                <code class="language-code">@*</code>) and deep XPath axis requests (<code class="language-code">ancestor</code>, <code class="language-code">descendant</code> or
                <code class="language-code">//*</code>, <code class="language-code">preceding</code>, <code class="language-code">following</code>).</p>
          </li>
          <li>
            <p>If possible, substitute regular expression functions (<code class="language-code">matches()</code>, <code class="language-code">replace()</code>, <code class="language-code">tokenize()</code>)
              with simple string manipulation functions (<code class="language-code">contains()</code>,
                <code class="language-code">starts-with()</code>, <code class="language-code">ends-with()</code>, <code class="language-code">substring-before()</code>,
                <code class="language-code">substring-after()</code>, <code class="language-code">translate()</code></p>
          </li>
          <li>
            <p>Indent longer conditional statements, loops and nested functions</p>
            <pre><code class="language-markup">&lt;xsl:value-of select="if(foo)
                      then foo
                      else if (bar)
                           then bar 
                           else false()"/&gt;</code></pre>
          </li>
          <li>
            <p>Comment longer XPath statements: <code class="language-code">(: my XPath comment :)</code></p>
          </li>
        </ul>
      </div><div id="d9662e348" class="section scrollspy">
        <h2 class="header">RelaxNG/XSD</h2>
        <p>Use <a href="http://www.xfront.com/GlobalVersusLocal.html#SecondDesign">➼ Salami Slice
            Design</a> pattern for writing Schemas</p>
      </div><div id="d9662e360" class="section scrollspy">
        <h2 class="header">DTD</h2>
        <p>Yo mama use a DTD for her CD catalog.</p>
      </div></div>
          
          <div class="col hide-on-small-only m3 l2">
            <div class="toc-wrapper pin-top" style="top: 0px;">
              <div style="height: 1px;">
                <ul id="tr-toc" class="table-of-contents"><li><a href="#d9662e9" class="active">General</a></li><li><a href="#d9662e58">Repository</a></li><li><a href="#d9662e133">XProc</a></li><li><a href="#d9662e202">XSLT</a></li><li><a href="#d9662e260">XPath</a></li><li><a href="#d9662e348">RelaxNG/XSD</a></li><li><a href="#d9662e360">DTD</a></li></ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <footer class="page-footer grey">
      <div class="container">
        <div class="row">
          <div id="tr-footer-1" class="col s12 m6 l4">
            <h5 class="white-text">GitHub</h5>
            <p class="white-text">Checkout the transpect repositories on GitHub and use transpect in your project. 
              Give us feedback, create issues and make pull requests.</p>
            <p><a target="_blank" href="https://github.com/transpect" class="btn red">GitHub</a></p>
          </div>
          <div id="tr-footer-2" class="col s12 m6 l4">
            <h5 class="white-text">Twitter</h5>
            <p class="white-text">News from le-tex’ XML machine room. Mostly related to 
              XSLT/XPath 2+, XProc, Relax NG, Schematron, and our 
              open-source framework transpect.
            </p>
            <p><a target="_blank" href="https://twitter.com/intent/user?screen_name=letexml" class="btn red">Follow @letexml</a></p>
          </div>
          <div id="tr-footer-3" class="col s12 m6 l4">
            <a target="_blank" href="http://www.le-tex.de"><object id="letex-logo" type="image/svg+xml" data="icons/logo-le-tex.svg">Your browser does not support SVG</object></a>
          </div>
        </div>
      </div>
      <div class="footer-copyright grey darken-1">
        <div class="container">
          <div class="row">
            <div id="tr-footer-copyright-1" class="col s12 m6 l6">
              <p class="white-text left">le-tex publishing services GmbH, 2015</p>
            </div>
            <div id="tr-footer-copyright-2" class="col s12 m6 l6">
              <p><a class="white-text right" href="http://www.le-tex.de">http://www.le-tex.de</a></p>
            </div>
          </div>
        </div>
      </div>
    </footer>
    
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="js/prism.js"></script>
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <script src="js/init.js"></script>
  </body>
</html>